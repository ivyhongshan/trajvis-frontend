/* ===== 主题变量 ===== */
:root{
  --brand-brown:#6f3f32;
  --panel-border:#e5e7eb;
  --panel-bg:#ffffff;
  --muted:#64748b;

  --green:#28a745;
  --blue:#1f78b4;
  --orange:#f39c12;

  --ring:#ef9ca1;
  --shadow:0 6px 16px rgba(0,0,0,.08);
}

/* 让任意外层壳子吃满宽度（兜底覆盖） */
.app, .container, .content, .layout, .page-wrap {
  width: 100% !important;
  max-width: 100% !important;
  margin: 0 !important;
  box-sizing: border-box;
}

/* 页面背景 */
.page { background:#fafafa; min-height:100vh; }

/* ===== 顶部栏（保留） ===== */
.topbar{
  position: sticky; top:0; z-index: 40;
  display:flex; align-items:center; justify-content:space-between;
  padding:10px 14px; background:var(--brand-brown); color:#fff;
  box-shadow:0 1px 0 rgba(0,0,0,.12);
}
.topbar__title{ font-size:22px; font-weight:800; letter-spacing:.2px; }
.topbar__legend{ display:flex; align-items:center; gap:14px; flex-wrap:wrap; font-size:14px; opacity:.95; }
.dot{ width:10px; height:10px; border-radius:50%; display:inline-block; margin-right:6px; }
.dot--green{ background:var(--green); } .dot--blue{ background:var(--blue); } .dot--orange{ background:var(--orange); }
.patientbox{ display:flex; align-items:center; gap:8px; }
.patientbox__input{ height:26px; width:74px; border-radius:6px; border:1px solid rgba(255,255,255,.6);
  background:rgba(255,255,255,.15); color:#fff; padding:0 8px; }

/* ===== 唯一的两栏布局：.app-shell ===== */
.app-shell{
  display: grid;
  grid-template-columns: minmax(420px, 4fr) minmax(620px, 6fr); /* 左4:右6 */
  gap: 16px;
  align-items: start;
  padding: 10px 14px 24px;
}
.app-shell > *{ min-width: 0; } /* 允许收缩，避免把右栏“挤”到空白 */

.left-pane{
  position: sticky;
  top: 56px; /* 等于顶部栏高度 */
  height: calc(100vh - 72px);
  overflow: auto;
  padding-right: 4px;
}
.right-pane{ min-width: 0; }

@media (max-width: 1200px){
  .app-shell{ grid-template-columns: 1fr; }
  .left-pane{ position: static; height:auto; overflow:visible; }
}

/* ===== 卡片 ===== */
.card{
  border:1px solid var(--panel-border);
  border-radius:12px;
  background: var(--panel-bg);
  box-shadow: var(--shadow);
  padding: 12px;
}
.card--flush{ padding: 8px 10px; }
.card--section{ margin-bottom: 12px; }
.card__head{ margin-bottom: 6px; }
.card__title{ margin:0; font-size:16px; font-weight:800; letter-spacing:.2px; color:#0f172a; display:flex; align-items:center; gap:6px; }
.section-line{ height:3px; background:var(--ring); border-radius:2px; margin-top:6px; }

/* ===== Clinical Indicator 自适应容器 ===== */
.ci-wrap{ width:100%; overflow: visible; }
.ci-body{
  width: 100%;
  height: 660px;          /* 你要“完全展开”的高度 */
  overflow: visible;
}
.ci-body .recharts-wrapper{ overflow: visible; }
/* 隐藏组件内部标题（如果组件自己再渲染标题） */
.ci-body h1, .ci-body h2, .ci-body h3 { display:none !important; }

/* UMAP */
.umap-wrap{ width:100%; min-height:280px; }

.muted{ color:var(--muted); }
svg, canvas{ max-width:100%; }

/* ---- PatientView 表格化（保留） ---- */
.pv-card{ padding:12px; }
.pv-section-title{ font-weight:800; font-size:18px; margin:8px 0 6px; color:#0f172a; }
.pv-grid{ width:100%; border:1px solid var(--panel-border); border-radius:10px; overflow:hidden; }
.pv-grid .row{ display:grid; grid-template-columns: 1fr 1fr 1fr 1fr; }
.pv-grid .cell{ background:#fafafa; padding:10px 12px; border-right:1px solid #eee; border-top:1px solid #eee; font-size:14px; color:#0f172a; }
.pv-grid .head{ background:#f6f7f9; font-weight:700; }
.pv-grid .badge{ background:#cfe9ef; color:#0f172a; padding:6px 10px; border-radius:8px; display:inline-block; }
.pv-grid .cell:last-child{ border-right:none; }
.pv-grid .row:first-child .cell{ border-top:none; }
.pv-subtitle{ text-align:center; font-weight:800; margin:12px 0 4px; }
.left-pane .card{ width:100%; }

/* AnalysisView 容器与网格 */
.analysis-wrap { width: 100%; }
.analysis-wrap .recharts-wrapper { overflow: visible; } /* 阴影不被裁切 */
.analysis-grid{
  display: grid;
  grid-template-columns: repeat(4, minmax(220px, 1fr));
  gap: 12px;
}
.panel{
  border: 1px solid #eee;
  border-radius: 10px;
  padding: 10px;
  min-width: 0;             /* 重要：允许收缩，避免把右侧“挤”出空白 */
}
.panel--big{ margin: 8px 0 12px; }

/* 屏幕变窄自动重排 */
@media (max-width: 1500px){
  .analysis-grid{ grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 820px){
  .analysis-grid{ grid-template-columns: 1fr; }
}
